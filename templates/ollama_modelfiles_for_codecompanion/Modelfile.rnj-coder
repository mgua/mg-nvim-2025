# Modelfile for RNJ-1 8B
# TomWare AI Coding Infrastructure
#
# Base model: rnj-1:8b (~4.9GB Q4 quantization)
# Target: 8GB+ NVIDIA GPU  
# Use case: Alternative coding assistant, code completion
#
# RNJ-1 is based on Qwen2.5-Coder with additional training
# Known for strong reasoning and code generation capabilities

FROM rnj-1:8b

# GPU Configuration
# 999 = auto-detect, load maximum layers possible
PARAMETER num_gpu 999

# Context Window
# 16384 tokens - matches Qwen2.5-Coder capability
PARAMETER num_ctx 16384

# Batch size for prompt processing
PARAMETER num_batch 512

# Generation parameters optimized for code
# Low temperature for deterministic output
PARAMETER temperature 0.2

# Nucleus sampling
PARAMETER top_p 0.9

# Top-k sampling
PARAMETER top_k 40

# Repetition control
PARAMETER repeat_penalty 1.1
PARAMETER repeat_last_n 64

# Stop sequences
PARAMETER stop "<|endoftext|>"
PARAMETER stop "<|im_end|>"
PARAMETER stop "<|fim_prefix|>"
PARAMETER stop "<|fim_middle|>"
PARAMETER stop "<|fim_suffix|>"
PARAMETER stop "```\n\n"
PARAMETER stop "\n\n\n"

# System prompt for coding assistance
SYSTEM """You are an expert coding assistant with deep knowledge of software development best practices.

Your core principles:
- Write clean, readable, well-documented code
- Follow language-specific conventions and idioms
- Prioritize correctness over cleverness
- Keep solutions simple unless complexity is justified
- Include error handling where appropriate

When responding:
- If asked to write code, provide working, complete solutions
- If asked to modify code, show only the relevant changes with context
- If asked to explain, be concise and focus on the key concepts
- If you see a bug or improvement opportunity, mention it
- Use comments sparingly, only where logic is non-obvious

You support all major programming languages including Python, JavaScript/TypeScript, Go, Rust, C/C++, Java, C#, Bash, PowerShell, Lua, SQL, and more."""
